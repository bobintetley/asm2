Find Adopters By Date
###
Movements
###
Any
###
Simple report that accepts a date range and produces a list of all owners who adopted an animal in that time period.
###
en_US
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT OwnerName, OwnerAddress, OwnerTown, OwnerCounty, OwnerPostcode, HomeTelephone, WorkTelephone, MobileTelephone, ShelterCode, AnimalName, MovementDate FROM owner INNER JOIN adoption ON adoption.OwnerID = owner.ID INNER JOIN animal ON adoption.AnimalID = animal.ID WHERE MovementType = 1 AND MovementDate BETWEEN '$@from$' AND '$@to$' ORDER BY MovementDate
###
$$HEADER
<table border=1><tr>
<td><b>Name</b></td>
<td><b>Address</b></td>
<td><b>Zipcode</b></td>
<td><b>Home</b></td>
<td><b>Work</b></td>
<td><b>Cell</b></td>
<td><b>Code</b></td>
<td><b>Animal</b></td>
<td><b>Date</b></td>
</tr>
HEADER$$

$$BODY<tr>
<td>$ownername</td>
<td>$owneraddress, $ownertown $ownercounty</td>
<td>$ownerpostcode</td>
<td>$hometelephone</td>
<td>$worktelephone</td>
<td>$mobiletelephone</td>
<td>$sheltercode</td>
<td>$animalname</td>
<td>$movementdate</td>
</tr>
BODY$$

$$FOOTER
</table>
FOOTER$$

&&&
Find Adopters By Date
###
Movements
###
Any
###
Simple report that accepts a date range and produces a list of all owners who adopted an animal in that time period.
###
en_GB
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT OwnerName, OwnerAddress, OwnerTown, OwnerCounty, OwnerPostcode, HomeTelephone, WorkTelephone, MobileTelephone, ShelterCode, AnimalName, MovementDate FROM owner INNER JOIN adoption ON adoption.OwnerID = owner.ID INNER JOIN animal ON adoption.AnimalID = animal.ID WHERE MovementType = 1 AND MovementDate BETWEEN '$@from$' AND '$@to$' ORDER BY MovementDate
###
$$HEADER
<table border=1><tr>
<td><b>Name</b></td>
<td><b>Address</b></td>
<td><b>Postcode</b></td>
<td><b>Home</b></td>
<td><b>Work</b></td>
<td><b>Mobile</b></td>
<td><b>Code</b></td>
<td><b>Animal</b></td>
<td><b>Date</b></td>
</tr>
HEADER$$

$$BODY<tr>
<td>$ownername</td>
<td>$owneraddress, $ownertown $ownercounty</td>
<td>$ownerpostcode</td>
<td>$hometelephone</td>
<td>$worktelephone</td>
<td>$mobiletelephone</td>
<td>$sheltercode</td>
<td>$animalname</td>
<td>$movementdate</td>
</tr>
BODY$$

$$FOOTER
</table>
FOOTER$$

&&&
Donation Breakdown By Date
###
Financial
###
Any
###
Produces a list of all donations by type for a given date period, with totals.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ownerdonation.Date, OwnerName, donationtype.DonationName, FLOOR(Donation) AS amt FROM owner INNER JOIN ownerdonation ON ownerdonation.OwnerID = owner.ID INNER JOIN donationtype ON donationtype.ID = ownerdonation.DonationTypeID WHERE ownerdonation.Date BETWEEN '$@from$' AND '$@to$' ORDER BY donationtype.DonationName, ownerdonation.Date
###
$$HEADER
HEADER$$

$$GROUP_DonationName
$$HEAD
<h2>$DonationName</h2>
<table border=1><tr>
<td><b>Date</b></td>
<td><b>Donor</b></td>
<td><b>Amount</b></td>
</tr>
$$FOOT
</table>
<p><b>Total $DonationName: {SUM.amt.2}</b></p>
GROUP$$ 
GROUP$$

$$BODY
<tr>
<td>$date</td>
<td>$ownername</td>
<td>$amt</td>
</tr>
BODY$$

$$FOOTER
FOOTER$$

&&&
Deceased Reasons by Species and Date
###
Statistics
###
Any
###
Produces a list of deceased reasons for animals, grouped by species and between two dates.
###
en
###
SELECT ReasonName, SpeciesName, COUNT(PTSReasonID) AS Total FROM animal 
INNER JOIN deathreason ON deathreason.ID = PTSReasonID
INNER JOIN species ON animal.SpeciesID = species.ID
WHERE DeceasedDate BETWEEN '$ASK DATE Enter date from$' AND '$ASK DATE Enter date to$'
GROUP BY SpeciesName, ReasonName
ORDER BY SpeciesName, ReasonName
###
$$HEADER
HEADER$$

$$GROUP_SpeciesName
$$HEAD
<h2>$SpeciesName</h2>

<table border=1><tr>
<td><b>Reason</b></td>
<td><b></b></td>
</tr>
$$FOOT
</table>

<p><b>Total for $SpeciesName: {SUM.Total.0}</b></p>
GROUP$$

$$BODY<tr>
<td>$ReasonName</td>
<td>$Total</td>
</tr>
BODY$$

$$FOOTER
</table>
FOOTER$$

&&&
Euthanasia Reasons by Species and Date
###
Statistics
###
Any
###
Produces a list of euthanasia reasons for animals, grouped by species and between two dates.
###
en
###
SELECT ReasonName, SpeciesName, COUNT(PTSReasonID) AS Total FROM animal 
INNER JOIN deathreason ON deathreason.ID = PTSReasonID
INNER JOIN species ON animal.SpeciesID = species.ID
WHERE DeceasedDate BETWEEN '$ASK DATE Enter date from$' AND '$ASK DATE Enter date to$'
AND PutToSleep = 1 
GROUP BY SpeciesName, ReasonName
ORDER BY SpeciesName, ReasonName
###
$$HEADER
HEADER$$

$$GROUP_SpeciesName
$$HEAD
<h2>$SpeciesName</h2>

<table border=1><tr>
<td><b>Reason</b></td>
<td><b></b></td>
</tr>
$$FOOT
</table>

<p><b>Total for $SpeciesName: {SUM.Total.0}</b></p>
GROUP$$

$$BODY<tr>
<td>$ReasonName</td>
<td>$Total</td>
</tr>
BODY$$

$$FOOTER
</table>
FOOTER$$

&&&
Cage Card
###
Auditing
###
Any
###
An animal cage card with image.
###
en
###
SELECT
animal.activeMovementType,
animal.activeMovementID,
animal.animalname,
animal.ShelterCode,
animal.speciesID,
animal.breedID,
animal.basecolourID,
animal.shelterLocation,
animal.animalTypeID,
animal.Markings,
lksize.Size,
animal.AnimalComments,
animal.datebroughtin,
animal.dateofbirth,
animal.id,
animalvaccination.animalid,
animalvaccination.vaccinationid,
vaccinationtype.vaccinationType,
entryreason.reasonname,
(SELECT Name FROM lksynun WHERE ID = animal.IsGoodWithDogs) AS WithDogs,
(SELECT Name FROM lksynun WHERE ID = animal.IsGoodWithCats) AS WithCats,
(SELECT Name FROM lksynun WHERE ID = animal.IsGoodWithChildren) AS WithChildren,
(SELECT Name FROM lksynun WHERE ID = animal.IsHouseTrained) AS HouseTrained,
(SELECT Sex FROM lksex WHERE ID = animal.sex) AS TheSex,
(SELECT Name FROM lksyesno WHERE ID = animal.neutered) AS altered,
(SELECT NAME FROM lksyesno WHERE ID = animal.HasActiveReserve) AS reserved,
animal.breedname,
species.speciesName,
basecolour.basecolour,
internallocation.LocationName,
animalType.animalType,
internallocation.LocationName AS TheLocation,
internallocation.LocationName AS CurrentLocation,
animal.TimeOnShelter AS OnShelterTime

FROM animal
INNER JOIN species ON species.ID=animal.speciesID
INNER JOIN internallocation ON internallocation.id=animal.shelterlocation
INNER JOIN breed ON breed.ID=animal.breedID
INNER JOIN basecolour ON basecolour.ID=animal.basecolourID
INNER JOIN animalType ON animalType.ID=animal.animalTypeID
INNER JOIN lksize ON
lksize.ID=animal.Size
INNER JOIN entryreason ON
entryreason.ID=animal.entryreasonid
LEFT OUTER JOIN animalvaccination ON
animalvaccination.animalID=animal.ID
LEFT OUTER JOIN vaccinationtype ON
vaccinationtype.ID=animalvaccination.vaccinationID

WHERE ShelterCode = '$ASK STRING Enter Animal Code:$'

ORDER BY animal.AnimalName
###
$$HEADER
HEADER$$

$$BODY
<table width="700" border="0">
<tr>
<td width="46"></td>
<td width="654"><div align="center"><font size=4><B>
Your Humane Society</B></font><br /><br />
<font size=2> Please ask for assistance.<br />
Dogs do not display true personality in kennels.<br />
Please evaluate dogs in Dog Park.<br />
Do not open cages without permission</font><br />
</p>
</div></td>
</tr>
</table>
<table width="700" border="1">
<tr>
<td width="350" colspan="2">Name:<br />
<font size="10">$animalname<br />
</td></font></span>
<td width="350" colspan="2"><font size="5">Code: <B>$sheltercode</B></font><br />
<font size="3"> Location: <B>$thelocation</B></font><br />
</td></span>
</tr>
<tr>
<td width="175">Admitted:<br />
<font size="5">$datebroughtin</font><br />
</td>
<td width="175">Approximate Date of Birth:<br /><font size="5">$dateofbirth<br /></font>
</td>
<td width="175">Sex:<br /> <font size=5>$thesex<br /></font>
</td>
<td width="175">Fixed:<br /> <font size=5>$altered<br /></font>
</td>
</tr>
<tr>
<td width="350" colspan="2"><img height="200" width="300" src="{IMAGE.$ID}" />
</td>
<td width="350" colspan="2"><font size="3"> Breed: <B>$BreedName</B><br />
Color: <B>$BaseColour</B><br /></font>
<font size="2">Markings: <B>$Markings</B><br /></font>
<font size="3">Size: <B>$Size</B><br />
Housetrained? <B>$HouseTrained</B><br />
Good With Dogs? <B>$WithDogs</B><br />
Good With Cats? <B>$WithCats</B><br />
Good With Children? <B>$WithChildren</B><br />
Vaccination Type: <B>$vaccinationtype</B><br />
</td></font>
</tr>
<tr>
<td width="700" colspan="4"><font size="5">Comments:<br />
$AnimalComments</td></font>
</tr>
<tr>
<td width="700" colspan="4"><font size="3">MYM Type:<br />$animalType
</td></font>
</tr>
</table>
<p>&nbsp;</p>
BODY$$
$$FOOTER
FOOTER$$

&&&
Shelter Inventory at Date
###
Inventories
###
Any
###
Produces a historical animal inventory for any date.
###
en
###
$VAR thedate DATE Please select an inventory date.$
SELECT 
ShelterCode, 
AnimalName,
animaltype.AnimalType,
species.SpeciesName,
BreedName,
AnimalAge, AgeGroup,
internallocation.LocationName,
lksmovementtype.MovementType AS LatestMovement,
animal.ActiveMovementDate AS DateLeftShelter,
owner.OwnerName
FROM animal 
INNER JOIN animaltype ON animal.AnimalTypeID = animaltype.ID
INNER JOIN species ON species.ID = animal.SpeciesID
INNER JOIN internallocation ON internallocation.ID = animal.ShelterLocation
LEFT OUTER JOIN lksmovementtype ON lksmovementtype.ID = animal.ActiveMovementType
LEFT OUTER JOIN adoption ON adoption.ID = animal.ActiveMovementID
LEFT OUTER JOIN owner ON owner.ID = adoption.OwnerID
WHERE
NOT EXISTS (SELECT MovementDate FROM adoption WHERE MovementDate < '$@thedate$' AND ReturnDate >= '$@thedate$' AND MovementType <> 2)
AND NOT EXISTS (SELECT MovementDate FROM adoption WHERE MovementDate < '$@thedate$' AND ReturnDate Is Null AND MovementType <> 2)
AND DateBroughtIn <= '$@thedate$'
AND NonShelterAnimal = 0 
AND (DeceasedDate Is Null OR DeceasedDate > '$@thedate$') 
ORDER BY LocationName, SpeciesName
###
$$HEADER
HEADER$$

$$GROUP_LocationName
$$HEAD
<h2>$LOCATIONNAME</h2>
$$FOOT
<p>Total $LOCATIONNAME: {COUNT.LocationName}</p>
GROUP$$

$$GROUP_SpeciesName
$$HEAD
<h2>$SPECIESNAME</h2>
<table border=1><tr>
<td><b>Code</b></td>
<td><b>Name</b></td>
<td><b>Type</b></td>
<td><b>Breed</b></td>
<td><b>Age</b></td>
<td><b>Last Movement</b></td>
<td><b>Left Shelter</b></td>
<td><b>To</b></td>
</tr>
$$FOOT
</table>
<p>Total $SPECIESNAME: {COUNT.SpeciesName}</p>
GROUP$$

$$BODY<tr>
<td>$SHELTERCODE</td>
<td>$ANIMALNAME</td>
<td>$ANIMALTYPE</td>
<td>$BREEDNAME</td>
<td>$ANIMALAGE ($AGEGROUP)</td>
<td>$LATESTMOVEMENT</td>
<td>$DATELEFTSHELTER</td>
<td>$OWNERNAME</td>
</tr>
BODY$$

$$FOOTER
<h2>Total Animals: {COUNT.LocationName}</h2>
FOOTER$$

&&&
Owners with Active Criteria
###
Owners
###
Any
###
Produces a list of all owners on file with active search criteria
###
en
###
SELECT OwnerName,
(SELECT Name FROM lksyesno WHERE ID = MatchActive) AS Active, 
MatchAdded, 
MatchExpires, 
(SELECT Sex FROM lksex WHERE ID = MatchSex - 1) AS Sex, 
(SELECT Size FROM lksize WHERE ID = MatchSize - 1) AS Size, 
MatchAgeFrom, 
MatchAgeTo, 
(SELECT AnimalType FROM animaltype WHERE ID = MatchAnimalType) AS AnimalType,
(SELECT SpeciesName FROM species WHERE ID =MatchSpecies) AS Species, 
(SELECT BreedName FROM breed WHERE ID = MatchBreed) AS Breed, 
(SELECT BreedName FROM breed WHERE ID = MatchBreed2) AS OrBreed, 
(SELECT Name FROM lksyesno WHERE ID = MatchGoodWithCats) AS GoodWithCats, 
(SELECT Name FROM lksyesno WHERE ID = MatchGoodWithDogs) AS GoodWithDogs, 
(SELECT Name FROM lksyesno WHERE ID = MatchGoodWithChildren) AS GoodWithChildren, 
(SELECT Name FROM lksyesno WHERE ID = MatchHouseTrained) AS HouseTrained,
MatchCommentsContain
FROM owner
WHERE MatchActive = 1
###
$$HEADER
<table border=1><tr>
<td><b>Name</b></td>
<td><b>Added</b></td>
<td><b>Expires</b></td>
<td><b>Sex</b></td>
<td><b>Size</b></td>
<td><b>Aged From</b></td>
<td><b>To</b></td>
<td><b>Type</b></td>
<td><b>Species</b></td>
<td><b>Breed</b></td>
<td><b>or</b></td>
<td><b>Good with cats</b></td>
<td><b>Good with dogs</b></td>
<td><b>Good with children</b></td>
<td><b>Housetrained</b></td>
<td><b>Comments contain</b></td>
</tr>
HEADER$$

$$BODY<tr>
<td>$OWNERNAME</td>
<td>$MATCHADDED</td>
<td>$MATCHEXPIRES</td>
<td>$SEX</td>
<td>$SIZE</td>
<td>$MATCHAGEFROM</td>
<td>$MATCHAGETO</td>
<td>$ANIMALTYPE</td>
<td>$SPECIES</td>
<td>$BREED</td>
<td>$ORBREED</td>
<td>$GOODWITHCATS</td>
<td>$GOODWITHDOGS</td>
<td>$GOODWITHCHILDREN</td>
<td>$HOUSETRAINED</td>
<td>$MATCHCOMMENTSCONTAIN</td>
</tr>
BODY$$

$$FOOTER
</table>
FOOTER$$

&&&
Active Fosters
###
Auditing
###
Any
###
Produces a list of all active fosters with health/vaccination information
###
en_US
###
SELECT
OwnerName AS FosteredTo,
ShelterCode, AnimalName,
(SELECT Sex FROM lksex WHERE ID = animal.Sex) AS Sex,
(SELECT BaseColour FROM basecolour WHERE ID = animal.BaseColourID) AS Colour,
BreedName,
DateOfBirth,
(SELECT Name FROM lksyesno WHERE ID = animal.Neutered) AS Altered,
NeuteredDate AS DateAltered,
(SELECT Name FROM lksyesno WHERE ID = animal.CombiTested) AS FIVLTested,
CombiTestDate AS FIVLTestDate,
(SELECT Name FROM lksposneg WHERE ID = animal.CombiTestResult) AS FIVLTestResult,
(SELECT Name FROM lksyesno WHERE ID = animal.HeartwormTested) AS HeartwormTested,
HeartwormTestDate,
(SELECT Name FROM lksposneg WHERE ID = animal.HeartwormTestResult) AS HeartwormTestResult,
DateBroughtIn,
(SELECT OwnerName FROM owner WHERE ID = animal.BroughtInByOwnerID) AS BroughtInBy,
(SELECT ReasonName FROM entryreason WHERE ID = animal.EntryReasonID) AS EntryReason,
HealthProblems,
(SELECT Name FROM lksyesno WHERE ID = animal.HasSpecialNeeds) AS SpecialNeeds,
(SELECT VaccinationType FROM animalvaccination INNER JOIN vaccinationtype ON animalvaccination.VaccinationID = vaccinationtype.ID
WHERE AnimalID = animal.ID ORDER BY DateRequired DESC LIMIT 1) AS NextVaccination,
(SELECT DateRequired FROM animalvaccination INNER JOIN vaccinationtype ON animalvaccination.VaccinationID = vaccinationtype.ID
WHERE AnimalID = animal.ID ORDER BY DateRequired DESC LIMIT 1) AS DateNextVacc
FROM animal
INNER JOIN adoption ON adoption.AnimalID = animal.ID
INNER JOIN owner ON owner.ID = adoption.OwnerID
WHERE MovementType = 2 AND DeceasedDate Is Null AND ReturnDate Is Null ORDER BY FosteredTo
###
$$HEADER
HEADER$$

$$GROUP_FosteredTo
$$HEAD
<h2>$FOSTEREDTO</h2>
<hr />
$$FOOT
<p>Total animals on foster with $FOSTEREDTO: {COUNT.ShelterCode}</p>
GROUP$$

$$BODY
<table>
<tr>
<td><b>Code:</td>
<td>$SHELTERCODE</td>
</tr><tr>
<td><b>Name:</b></td>
<td>$ANIMALNAME</td>
</tr><tr>
<td><b>Sex:</b></td>
<td>$SEX</td>
</tr><tr>
<td><b>Color:</b></td>
<td>$COLOUR</td>
</tr><tr>
<td><b>Breed:</b></td>
<td>$BREEDNAME</td>
</tr><tr>
<td><b>Date Of Birth:</b></td>
<td>$DATEOFBIRTH</td>
</tr><tr>
<td><b>Altered:</b></td>
<td>$ALTERED $DATEALTERED</td>
</tr><tr>
<td><b>FIVL Tested:</b></td>
<td>$FIVLTESTED $FIVLTESTDATE $FIVLTESTRESULT</td>
</tr><tr>
<td><b>Heartworm Tested:</b></td>
<td>$HEARTWORMTESTED $HEARTWORMTESTDATE $HEARTWORMTESTRESULT</td>
</tr><tr>
<td><b>Brought In:</b></td>
<td>$DATEBROUGHTIN by $BROUGHTINBY</td>
</tr><tr>
<td><b>Reason:</b></td>
<td>$ENTRYREASON</td>
</tr><tr>
<td><b>Health Problems:</b></td>
<td>$HEALTHPROBLEMS</td>
</tr><tr>
<td><b>Special Needs?</b></td>
<td>$SPECIALNEEDS</td>
</tr><tr>
<td><b>Next Vaccination:</b></td>
<td>$NEXTVACCINATION $DATENEXTVACC</td>
</tr>
</table>
<hr />
BODY$$

$$FOOTER
<p>Total animals on foster: {COUNT.ShelterCode}</p>
FOOTER$$


&&&
Active Fosters
###
Auditing
###
Any
###
Produces a list of all active fosters with health/vaccination information
###
en
###
SELECT
OwnerName AS FosteredTo,
ShelterCode, AnimalName,
(SELECT Sex FROM lksex WHERE ID = animal.Sex) AS Sex,
(SELECT BaseColour FROM basecolour WHERE ID = animal.BaseColourID) AS Colour,
BreedName,
DateOfBirth,
(SELECT Name FROM lksyesno WHERE ID = animal.Neutered) AS Altered,
NeuteredDate AS DateAltered,
(SELECT Name FROM lksyesno WHERE ID = animal.CombiTested) AS FIVLTested,
CombiTestDate AS FIVLTestDate,
(SELECT Name FROM lksposneg WHERE ID = animal.CombiTestResult) AS FIVLTestResult,
(SELECT Name FROM lksyesno WHERE ID = animal.HeartwormTested) AS HeartwormTested,
HeartwormTestDate,
(SELECT Name FROM lksposneg WHERE ID = animal.HeartwormTestResult) AS HeartwormTestResult,
DateBroughtIn,
(SELECT OwnerName FROM owner WHERE ID = animal.BroughtInByOwnerID) AS BroughtInBy,
(SELECT ReasonName FROM entryreason WHERE ID = animal.EntryReasonID) AS EntryReason,
HealthProblems,
(SELECT Name FROM lksyesno WHERE ID = animal.HasSpecialNeeds) AS SpecialNeeds,
(SELECT VaccinationType FROM animalvaccination INNER JOIN vaccinationtype ON animalvaccination.VaccinationID = vaccinationtype.ID
WHERE AnimalID = animal.ID ORDER BY DateRequired DESC LIMIT 1) AS NextVaccination,
(SELECT DateRequired FROM animalvaccination INNER JOIN vaccinationtype ON animalvaccination.VaccinationID = vaccinationtype.ID
WHERE AnimalID = animal.ID ORDER BY DateRequired DESC LIMIT 1) AS DateNextVacc
FROM animal
INNER JOIN adoption ON adoption.AnimalID = animal.ID
INNER JOIN owner ON owner.ID = adoption.OwnerID
WHERE MovementType = 2 AND DeceasedDate Is Null AND ReturnDate Is Null ORDER BY FosteredTo
###
$$HEADER
HEADER$$

$$GROUP_FosteredTo
$$HEAD
<h2>$FOSTEREDTO</h2>
<hr />
$$FOOT
<p>Total animals on foster with $FOSTEREDTO: {COUNT.ShelterCode}</p>
GROUP$$

$$BODY
<table>
<tr>
<td><b>Code:</td>
<td>$SHELTERCODE</td>
</tr><tr>
<td><b>Name:</b></td>
<td>$ANIMALNAME</td>
</tr><tr>
<td><b>Sex:</b></td>
<td>$SEX</td>
</tr><tr>
<td><b>Colour:</b></td>
<td>$COLOUR</td>
</tr><tr>
<td><b>Breed:</b></td>
<td>$BREEDNAME</td>
</tr><tr>
<td><b>Date Of Birth:</b></td>
<td>$DATEOFBIRTH</td>
</tr><tr>
<td><b>Neutered:</b></td>
<td>$ALTERED $DATEALTERED</td>
</tr><tr>
<td><b>Combi-Tested:</b></td>
<td>$FIVLTESTED $FIVLTESTDATE $FIVLTESTRESULT</td>
</tr><tr>
<td><b>Heartworm Tested:</b></td>
<td>$HEARTWORMTESTED $HEARTWORMTESTDATE $HEARTWORMTESTRESULT</td>
</tr><tr>
<td><b>Brought In:</b></td>
<td>$DATEBROUGHTIN by $BROUGHTINBY</td>
</tr><tr>
<td><b>Reason:</b></td>
<td>$ENTRYREASON</td>
</tr><tr>
<td><b>Health Problems:</b></td>
<td>$HEALTHPROBLEMS</td>
</tr><tr>
<td><b>Special Needs?</b></td>
<td>$SPECIALNEEDS</td>
</tr><tr>
<td><b>Next Vaccination:</b></td>
<td>$NEXTVACCINATION $DATENEXTVACC</td>
</tr>
</table>
<hr />
BODY$$

$$FOOTER
<p>Total animals on foster: {COUNT.ShelterCode}</p>
FOOTER$$

&&&
Adoptions by Date with Addresses
###
Movements
###
Any
###
Produces a list of all adoptions between two dates with the names/addresses of original owners and adopters.
###
en
###
$VAR from DATE Enter from date$
$VAR to DATE Enter to date$

SELECT ShelterCode, AnimalName, DateBroughtIn, MovementDate, 
species.SpeciesName,
animaltype.AnimalType AS theType,
oo.OwnerName AS OOName, oo.OwnerAddress AS OOAddress, oo.OwnerTown AS OOTown, oo.OwnerCounty AS OOCounty, oo.OwnerPostcode AS OOPostcode,
no.OwnerName, no.OwnerAddress,
no.OwnerTown, no.OwnerCounty,
no.OwnerPostcode
FROM adoption
INNER JOIN animal ON adoption.AnimalID = animal.ID
INNER JOIN owner no ON adoption.OwnerID = no.ID
INNER JOIN owner oo ON animal.OriginalOwnerID = oo.ID
INNER JOIN animaltype ON animaltype.ID = animal.AnimalTypeID
INNER JOIN species ON species.ID = animal.SpeciesID
WHERE MovementType = 1 AND MovementDate BETWEEN '$@from$' AND '$@to$' ORDER BY MovementDate
###
$$HEADER
<table border=1><tr>
<td><b>Code</b></td>
<td><b>Name</b></td>
<td><b>Type</b></td>
<td><b>Entered Shelter</b></td>
<td><b>Came From</b></td>
<td><b>Adoption Date</b></td>
<td><b>Adopted To</b></td>
</tr>
HEADER$$

$$BODY<tr>
<td>$SHELTERCODE</td>
<td>$ANIMALNAME</td>
<td>$theType</td>
<td>$DateBroughtIn</td>
<td><i>$OOName</i><br/>
$OOAddress<br/>
$OOTown<br/>
$OOCounty<br/>
$OOPostcode</td>
<td>$MOVEMENTDATE</td>
<td><i>$OwnerName</i><br/>
$OwnerAddress<br/>
$OwnerTown<br/>
$OwnerCounty<br/>
$OwnerPostcode</td>
</tr>
BODY$$

$$FOOTER
</table>
FOOTER$$

&&&
Shelter Inventory with Original Owner Addresses
###
Inventories
###
Any
###
Produces an inventory of on shelter animals, broken down by species/location with original owner addresses.
###
en
###
SELECT ShelterCode, AnimalName, DateBroughtIn,
TimeOnShelter,
animaltype.AnimalType AS theType,
species.SpeciesName,
internallocation.LocationName,
oo.OwnerName AS OOName, oo.OwnerAddress AS OOAddress, oo.OwnerTown AS OOTown, oo.OwnerCounty AS OOCounty, oo.OwnerPostcode AS OOPostcode
FROM animal
INNER JOIN animaltype ON animaltype.ID = animal.AnimalTypeID
INNER JOIN species ON species.ID = animal.SpeciesID
INNER JOIN internallocation ON internallocation.ID = animal.ShelterLocation
INNER JOIN owner oo ON animal.OriginalOwnerID = oo.ID
WHERE Archived = 0 ORDER BY LocationName, SpeciesName, DateBroughtIn
###
$$HEADER
HEADER$$

$$GROUP_LocationName
$$HEAD
<h2>$LocationName</h2>
$$FOOT
<h3>Total $LocationName: {COUNT.ShelterCode}</h3>
GROUP$$

$$GROUP_SpeciesName
$$HEAD
<h3>$SpeciesName</h3>
<table border=1>
<tr>
<td><b>Code</b></td>
<td><b>Name</b></td>
<td><b>Type</b></td>
<td><b>Brought In</b></td>
<td><b>By</b></td>
<td><b>Time On Shelter</b></td>
</tr>
$$FOOT
</table>
<p>Total $SpeciesName: {COUNT.ShelterCode}</p>
GROUP$$

$$BODY
<tr>
<td>$ShelterCode</td>
<td>$AnimalName</td>
<td>$theType</td>
<td>$DateBroughtIn</td>
<td><i>$OOName</i><br />
$OOAddress<br />
$OOTown<br />
$OOCounty<br />
$OOPostcode
</td>
<td>$TimeOnShelter</td>
</tr>
BODY$$

$$FOOTER
</table>
<h2>Total animals on shelter: {SQL.SELECT COUNT(*) FROM animal WHERE Archived = 0}</h2>
FOOTER$$

